/*! bindr - v0.0.1 - 2014-12-23
* Copyright (c) 2014 ; Licensed  */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.bindr=b()}(this,function(){function a(a,b){this.from=a,this.dependency=b}function b(){this.injections={}}var c=function(){function a(a,b){return a.apply(this,b)}return function(){return a.prototype=this.prototype,new a(this,arguments)}}();a.prototype.to=function(a){return this.dependency=a,this},a.prototype.withArgs=function(a){return this.args="array"==typeof a?a:Array.prototype.splice.call(arguments,0),this},b.prototype.bind=function(b,c){var d;{if("object"!=typeof b)return this.injections[b]=new a(b,c),this.injections[b];for(d in b)b.hasOwnProperty(d)&&(this.injections[d]=new a(d,b[d]))}},b.prototype.run=function(a,b){var d,f,g=Object.getPrototypeOf(a).constructor.name;for(f=0;f<a.$binder.constructorArgs.length;f++)d=a.$binder.deps[f],this.injections[d]&&(Array.prototype.splice.call(b,f,0,c.apply(this.injections[d].dependency,this.injections[d].args)),a.$binder.dependsOn.push(d),e[g]=e[g]||{},e[g][d]=e[g][d]||e[this.injections[d].dependency.prototype.constructor.name]||{})};var d=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,e={};b.prototype.setupConstructor=function(a,b){var c,e=function h(){f.run(this,arguments),h.prototype.constructor.apply(this,arguments)},g=d.exec(a.toString());return g.length&&(c=g[1].split(",")),e.prototype.constructor=a,e.prototype.$binder={name:a.prototype.constructor.name,deps:b,constructorArgs:c,dependsOn:[]},e},b.prototype.trace=function(a){return"object"==typeof a?(a=Object.getPrototypeOf(a).constructor.name,e[a]):e},b.prototype.reset=function(){this.injections={},e={}};var f=new b,g=function(){return 2===arguments.length?f.setupConstructor.apply(f,arguments):this};return g.bind=f.bind.bind(f),g.trace=f.trace.bind(f),g.reset=f.reset.bind(f),g});